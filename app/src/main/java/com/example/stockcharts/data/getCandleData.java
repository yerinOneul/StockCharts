package com.example.stockcharts.data;import android.content.Context;import android.os.AsyncTask;import android.util.Log;import android.widget.Toast;import com.example.stockcharts.R;import com.github.mikephil.charting.data.CandleEntry;import org.jsoup.Jsoup;import org.jsoup.nodes.Document;import org.jsoup.nodes.Element;import org.jsoup.select.Elements;import java.io.IOException;import java.net.URLEncoder;import java.util.ArrayList;public class getCandleData extends AsyncTask {    Context context;    String code;    public getCandleData(Context context, String code){        this.context = context;        this.code = code;    }    @Override    protected Object doInBackground(Object[] objects) {        String url = context.getResources().getString(R.string.sise_day_url);        ArrayList<CandleEntry> data = new ArrayList<>();        try {            Document doc = Jsoup.connect(url + code).get();            Elements elements = doc.select("tbody").select("tr");            for (int i =0; i <elements.size()-1;i++){                String element = elements.get(i).select("td").text();                if (element.length() > 0) {                    //sample data : 2021.09.29 387,000 5,500 380,500 390,000 380,000 662,895                    String[] temp = element.split(" ");                    CandleEntry entry = new CandleEntry((float) i-2,Float.parseFloat(temp[4].replace(",","")),                            Float.parseFloat(temp[5].replace(",","")),Float.parseFloat(temp[3].replace(",","")),                            Float.parseFloat(temp[1].replace(",","")));                    data.add(entry);                }            }        } catch (IOException e) {            e.printStackTrace();        }        return data;    }}